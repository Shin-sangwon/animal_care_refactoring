<html layout:decorate="~{global/layout}">

    <div layout:fragment="content" class="container my-5">
        <body>

        <div class="container">
            <div class="page-header">
                <h3>예약내역</h3>
            </div>


            <div>

                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>회원</th>
                        <th>애완동물</th>
                        <th>병원</th>
                        <th>닥터</th>
                        <th>예약 날짜</th>
                        <th>예약 상태</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="mad : ${appointmentDtos}">
                        <td th:text="${mad.getAppointmentId}"></td>
                        <td th:text="${mad.memberName}"></td>
                        <td th:text="${mad.animalName}"></td>
                        <td th:text="${mad.hospitalName}"></td>
                        <td th:text="${mad.doctorName}"></td>
                        <td th:text="${mad.date}"></td>
                        <td th:text="${mad.status}"></td>
                        <td>
                            <a th:if="${mad.status.name() == 'COMPLETE'}"
                               href="#" th:href="@{/usr/mypage/member/appointment-info/{appointmentId}/edit (id=${mad.getAppointmentId})}"
                               class="btn btn-primary" role="button">MODIFY</a>
                        </td>
                        <td>
                            <a th:if="${mad.status.name() == 'COMPLETE'}" href="#" th:href="'javascript:cancel('+${mad.getAppointmentId}+')'"
                               class="btn btn-danger">CANCEL</a>
                        </td>
                    </tr>

                    </tbody>
                </table>
            </div>

        </div> <!-- /container -->

        </body>


        <script>
            function cancel(id) {
                var form = document.createElement("form");
                form.setAttribute("method", "post");
                form.setAttribute("action", "/usr/mypage/member/appointment-info/" + id + "/cancel");
                document.body.appendChild(form);
                form.submit();
            }
        </script>
    </div>
</html>